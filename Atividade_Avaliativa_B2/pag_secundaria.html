<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Gatopedia - Buscar Raças</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      padding-bottom: 80px;
    }
    footer {
      position: fixed;
      bottom: 0;
      width: 100%;
    }
  </style>
</head>
<body>

  <div class="container my-5">
    <h1 class="text-center mb-4">Raças de Gatos</h1>

    <div class="mb-3">
      <label for="raça" class="form-label">Escolha uma raça</label>
      <select class="form-select" id="raça">
        <option selected disabled>Selecione uma raça...</option>
      </select>
    </div>

    <div class="text-center">
      <button class="btn btn-primary" onclick="mostrar_raça()">Mostrar Raça</button>
    </div>

    <div id="saida" class="mt-5"></div>

    <div class="mt-4 text-center">
      <a href="pag_principal.html" class="btn btn-outline-secondary">Voltar à Página Principal</a>
    </div>
  </div>

  <!-- Toast -->
  <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
    <div id="toastInfo" class="toast align-items-center text-bg-info border-0" role="alert">
      <div class="d-flex">
        <div class="toast-body">
          Informação carregada com sucesso!
        </div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
      </div>
    </div>
  </div>

  <!-- Rodapé -->
  <footer class="bg-dark text-white text-center py-3">
    &copy; 2025 Gatopedia - Todos os direitos reservados.
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    const url_nome = `https://api.thecatapi.com/v1/breeds`;

    fetch(url_nome)
      .then(response => response.json())
      .then(names => {
        let select = document.getElementById("raça");
        for (let name of names) {
          let novaopcao = new Option(name.name, name.id);
          select.options[select.options.length] = novaopcao;
        }
      });

    function mostrar_raça() {
      let idRaça = document.getElementById('raça').value;
      let url_inf = `https://api.thecatapi.com/v1/breeds`;

      fetch(url_inf)
        .then(response => response.json())
        .then(dados => {
          let resultado = document.getElementById("saida");
          resultado.innerHTML = '';

          for (let dado of dados) {
            if (dado.id === idRaça) {
              let div = document.createElement("div");
              div.className = "card mb-4 p-4 shadow-sm";

              div.innerHTML = `
                <h4 class="card-title text-primary">${dado.name}</h4>
                <p><strong>Temperamento:</strong> ${dado.temperament}</p>
                <p><strong>Origem:</strong> ${dado.origin}</p>
                <p><strong>Descrição:</strong> ${dado.description}</p>
                <p><strong>Expectativa de vida:</strong> ${dado.life_span} anos</p>
              `;

              fetch(`https://api.thecatapi.com/v1/images/search?breed_ids=${dado.id}`)
                .then(response => response.json())
                .then(imagens => {
                  imagens.forEach(fotoData => {
                    let img = document.createElement('img');
                    img.src = fotoData.url;
                    img.className = "img-fluid rounded mt-3";
                    img.alt = `Imagem da raça ${dado.name}`;
                    div.appendChild(img);
                  });
                });

              resultado.appendChild(div);

              const toast = new bootstrap.Toast(document.getElementById('toastInfo'));
              toast.show();
            }
          }
        });
    }
  </script>
</body>
</html>
